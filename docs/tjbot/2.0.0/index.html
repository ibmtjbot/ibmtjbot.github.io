<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      Home - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li  class="active" >
        <a href="index.html">
          
          
            <svg fill="#0095dd" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      tjbotlib
    </h3>

    
      <h3>
        Resources
      </h3>
      
        <a href="https://ibmtjbot.github.io">tjbot</a>
      
        <a href="https://cloud.ibm.com">ibm-cloud</a>
      
        <a href="https://cloud.ibm.com/apidocs/assistant-v2">assistant</a>
      
        <a href="https://cloud.ibm.com/apidocs/language-translator">language-translator</a>
      
        <a href="https://cloud.ibm.com/apidocs/speech-to-text">speech-to-text</a>
      
        <a href="https://cloud.ibm.com/apidocs/text-to-speech">text-to-speech</a>
      
        <a href="https://cloud.ibm.com/apidocs/tone-analyzer">tone-analyzer</a>
      
        <a href="https://cloud.ibm.com/apidocs/visual-recognition/visual-recognition-v3">visual-recognition</a>
      
    

    <h3>Classes</h3><ul><li id="TJBot-nav"><a href="TJBot.html">TJBot</a><ul class='methods'><li data-type="method" id="TJBot-initialize-nav"><a href="TJBot.html#initialize">initialize</a></li><li data-type="method" id="TJBot-_setupCamera-nav"><a href="TJBot.html#_setupCamera">_setupCamera</a></li><li data-type="method" id="TJBot-_setupLED-nav"><a href="TJBot.html#_setupLED">_setupLED</a></li><li data-type="method" id="TJBot-_setupMicrophone-nav"><a href="TJBot.html#_setupMicrophone">_setupMicrophone</a></li><li data-type="method" id="TJBot-_setupServo-nav"><a href="TJBot.html#_setupServo">_setupServo</a></li><li data-type="method" id="TJBot-_setupSpeaker-nav"><a href="TJBot.html#_setupSpeaker">_setupSpeaker</a></li><li data-type="method" id="TJBot-_createServiceAPI-nav"><a href="TJBot.html#_createServiceAPI">_createServiceAPI</a></li><li data-type="method" id="TJBot-_assertCapability-nav"><a href="TJBot.html#_assertCapability">_assertCapability</a></li><li data-type="method" id="TJBot-sleep-nav"><a href="TJBot.html#.sleep">sleep</a></li><li data-type="method" id="TJBot-analyzeTone-nav"><a href="TJBot.html#analyzeTone">analyzeTone</a></li><li data-type="method" id="TJBot-converse-nav"><a href="TJBot.html#converse">converse</a></li><li data-type="method" id="TJBot-listen-nav"><a href="TJBot.html#listen">listen</a></li><li data-type="method" id="TJBot-_pauseListening-nav"><a href="TJBot.html#_pauseListening">_pauseListening</a></li><li data-type="method" id="TJBot-_resumeListening-nav"><a href="TJBot.html#_resumeListening">_resumeListening</a></li><li data-type="method" id="TJBot-see-nav"><a href="TJBot.html#see">see</a></li><li data-type="method" id="TJBot-recognizeObjectsInPhoto-nav"><a href="TJBot.html#recognizeObjectsInPhoto">recognizeObjectsInPhoto</a></li><li data-type="method" id="TJBot-takePhoto-nav"><a href="TJBot.html#takePhoto">takePhoto</a></li><li data-type="method" id="TJBot-shine-nav"><a href="TJBot.html#shine">shine</a></li><li data-type="method" id="TJBot-pulse-nav"><a href="TJBot.html#pulse">pulse</a></li><li data-type="method" id="TJBot-shineColors-nav"><a href="TJBot.html#shineColors">shineColors</a></li><li data-type="method" id="TJBot-randomColor-nav"><a href="TJBot.html#randomColor">randomColor</a></li><li data-type="method" id="TJBot-_normalizeColor-nav"><a href="TJBot.html#_normalizeColor">_normalizeColor</a></li><li data-type="method" id="TJBot-speak-nav"><a href="TJBot.html#speak">speak</a></li><li data-type="method" id="TJBot-play-nav"><a href="TJBot.html#play">play</a></li><li data-type="method" id="TJBot-translate-nav"><a href="TJBot.html#translate">translate</a></li><li data-type="method" id="TJBot-identifyLanguage-nav"><a href="TJBot.html#identifyLanguage">identifyLanguage</a></li><li data-type="method" id="TJBot-isTranslatable-nav"><a href="TJBot.html#isTranslatable">isTranslatable</a></li><li data-type="method" id="TJBot-translatableLanguages-nav"><a href="TJBot.html#translatableLanguages">translatableLanguages</a></li><li data-type="method" id="TJBot-languageForCode-nav"><a href="TJBot.html#languageForCode">languageForCode</a></li><li data-type="method" id="TJBot-codeForLanguage-nav"><a href="TJBot.html#codeForLanguage">codeForLanguage</a></li><li data-type="method" id="TJBot-_loadLanguageTranslationModels-nav"><a href="TJBot.html#_loadLanguageTranslationModels">_loadLanguageTranslationModels</a></li><li data-type="method" id="TJBot-armBack-nav"><a href="TJBot.html#armBack">armBack</a></li><li data-type="method" id="TJBot-raiseArm-nav"><a href="TJBot.html#raiseArm">raiseArm</a></li><li data-type="method" id="TJBot-lowerArm-nav"><a href="TJBot.html#lowerArm">lowerArm</a></li><li data-type="method" id="TJBot-wave-nav"><a href="TJBot.html#wave">wave</a></li></ul></li></ul>
  </nav>

  <div id="main">
    

    
      



    

      


  <section class="readme">
    <article>
      <h1>TJBot Library</h1>
<blockquote>
<p>Node.js library that encapsulates TJBot's capabilities: seeing, listening, speaking, shining, and waving.</p>
</blockquote>
<p>This library can be used to create your own recipes for <a href="http://ibm.biz/mytjbot">TJBot</a>.</p>
<p>Some of TJBot's capabilities require <a href="https://www.ibm.com/cloud">IBM Cloud</a> services. For example, seeing is powered by the <a href="https://www.ibm.com/cloud/watson-visual-recognition">IBM Watson Visual Recognition</a> service. Speaking and listening are powered by the <a href="https://www.ibm.com/cloud/watson-text-to-speech">IBM Watson Text to Speech</a> and <a href="https://www.ibm.com/cloud/watson-speech-to-text">IBM Watson Speech to Text</a> services.</p>
<p>To use these services, you will need to sign up for a free <a href="https://www.ibm.com/cloud">IBM Cloud</a> account, create instances of the services you need, and download the authentication credentials.</p>
<h2>Usage</h2>
<ol>
<li>Install the library using <code>npm</code>.</li>
</ol>
<pre class="prettyprint source"><code>$ npm install --save tjbot
</code></pre>
<blockquote>
<p>ðŸ’¡ Note: The TJBot library was developed for use on Raspberry Pi. It may be possible to develop and test portions of this library on other Linux-based systems (e.g. Ubuntu), but this usage is not officially supported.</p>
</blockquote>
<ol start="2">
<li>Instantiate the <code>TJBot</code> object.</li>
</ol>
<pre class="prettyprint source"><code>import TJBot from 'tjbot';
const tj = new TJBot();
tj.initialize([TJBot.HARDWARE.LED, TJBot.HARDWARE.SERVO, TJBot.HARDWARE.MICROPHONE, TJBot.HARDWARE.SPEAKER]);
</code></pre>
<p>This code will configure your TJBot with an <code>LED</code>, <code>servo</code>, <code>microphone</code>, and <code>speaker</code>. The default configuration of TJBot uses English as the main language with a male voice. Here is an example of a TJBot that speaks with a female voice in Japanese:</p>
<pre class="prettyprint source"><code>var tj = new TJBot({ 
    robot: { 
        gender: TJBot.GENDERS.FEMALE 
    }, 
    speak: { 
        language: TJBot.LANGUAGES.SPEAK.JAPANESE 
    }
});
</code></pre>
<h3>IBM Watson Credentials</h3>
<p>If you are using IBM Watson services, store your authentication credentials in a file named <code>ibm-credentials.env</code>. Credentials may be downloaded from the page for your service instance, in the section named &quot;Credentials.&quot;</p>
<p>If you are using multiple IBM Watson services, you may combine all of the credentials together in a single file.</p>
<p>The file <code>ibm-credentials.sample.env</code> shows a sample of how credentials are stored.</p>
<blockquote>
<p>ðŸ’¡ Note: You may also specify the path to the credentials file in the TJBot constructor using the <code>credentialsFile</code> argument. For example, <code>const tj = new TJBot(credentialsFile=&quot;/home/pi/my-credentials.env&quot;)</code>.</p>
</blockquote>
<h2>Hardware Configuration</h2>
<p>The entire list of hardware devices supported by TJBot is defined in <code>TJBot.HARDWARE</code> and includes <code>CAMERA</code>, <code>LED</code>, <code>MICROPHONE</code>, <code>SERVO</code>, and <code>SPEAKER</code>. Each of these hardware devices may be configured by passing in configuration options to the <code>TJBot</code> constructor as follows.</p>
<pre class="prettyprint source"><code>var configuration = {
    log: {
        level: 'info', // valid levels are 'error', 'warn', 'info', 'verbose', 'debug', 'silly'
    },
    robot: {
        gender: TJBot.GENDERS.MALE, // see TJBot.GENDERS
    },
    converse: {
        assistantId: undefined, // placeholder for Watson Assistant's assistantId
    },
    listen: {
        microphoneDeviceId: 'plughw:1,0', // plugged-in USB card 1, device 0; see 'arecord -l' for a list of recording devices
        inactivityTimeout: -1, // -1 to never timeout or break the connection. Set this to a value in seconds e.g 120 to end connection after 120 seconds of silence
        backgroundAudioSuppression: 0.4, // should be in the range [0.0, 1.0] indicating how much audio suppression to perform
        language: TJBot.LANGUAGES.LISTEN.ENGLISH_US, // see TJBot.LANGUAGES.LISTEN
    },
    wave: {
        servoPin: 7, // corresponds to BCM 7 / physical PIN 26
    },
    speak: {
        language: TJBot.LANGUAGES.SPEAK.ENGLISH_US, // see TJBot.LANGUAGES.SPEAK
        voice: undefined, // use a specific voice; if undefined, a voice is chosen based on robot.gender and speak.language
        speakerDeviceId: 'plughw:0,0', // plugged-in USB card 1, device 0; 'see aplay -l' for a list of playback devices
    },
    see: {
        confidenceThreshold: 0.6,
        camera: {
            height: 720,
            width: 960,
            verticalFlip: false, // flips the image vertically, may need to set to 'true' if the camera is installed upside-down
            horizontalFlip: false, // flips the image horizontally, should not need to be overridden
        },
        language: TJBot.LANGUAGES.SEE.ENGLISH_US,
    },
    shine: {
        grbFormat: false, // use the GRB color format (set this to true if your LED shines green when it should shine red or visa versa)
    },
};
const tj = new TJBot(configuration);
</code></pre>
<h2>Capabilities</h2>
<p>TJBot has a number of capabilities that you can use to bring it to life. Capabilities are combinations of hardware and Watson services that enable TJBot's functionality. For example, &quot;listening&quot; is a combination of having a <code>speaker</code> and the <code>speech_to_text</code> service. Internally, the <code>_assertCapability()</code> method checks to make sure your TJBot is configured with the right hardware and services before it performs an action that depends on having a capability. Thus, the method used to make TJBot listen, <code>tj.listen()</code>, first checks that your TJBot has been configured with a <code>speaker</code> and the <code>speech_to_text</code> service.</p>
<p>TJBot's capabilities are:</p>
<ul>
<li><strong>Analyzing Tone</strong> with the <a href="https://www.ibm.com/cloud/watson-tone-analyzer">Watson Tone Analyzer</a> service</li>
<li><strong>Conversing</strong> with the <a href="https://www.ibm.com/cloud/watson-assistant/">Watson Assistant</a> service</li>
<li><strong>Listening</strong> with the <a href="https://www.ibm.com/cloud/watson-speech-to-text">Watson Speech to Text</a> service</li>
<li><strong>Seeing</strong> with the <a href="https://www.ibm.com/cloud/watson-visual-recognition">Watson Visual Recognition</a> service</li>
<li><strong>Shining</strong> its LED</li>
<li><strong>Speaking</strong> with the <a href="https://www.ibm.com/cloud/watson-text-to-speech">Watson Text to Speech</a> service</li>
<li><strong>Translating</strong> between languages with the <a href="https://www.ibm.com/cloud/watson-language-translator">Watson Language Translator</a> service</li>
<li><strong>Waving</strong>  its arm</li>
</ul>
<p>The full list of capabilities can be accessed programatically via <code>TJBot.CAPABILITIES</code>, the full list of hardware components can be accessed programatically via <code>TJBot.HARDWARE</code>, and the full list of Watson services can be accessed programatically via <code>TJBot.SERVICES</code>.</p>
<h2>TJBot API</h2>
<p>Please see <a href="https://ibmtjbot.github.io/docs/tjbot/2.0.0/">the API docs</a> for documentation of the TJBot API.</p>
<blockquote>
<p>ðŸ’¡ Please see the <a href="MIGRATING.md">Migration Guide</a> for guidance on migrating your code to the latest version of the TJBot API.</p>
</blockquote>
<h2>Tests</h2>
<p>TJBotLib uses the <a href="https://jestjs.io">Jest</a> framework for basic testing of the library. These tests may be run from the <code>tjbotlib</code> directory using <code>npm</code>:</p>
<pre><code>npm test
</code></pre>
<p>These tests include tests covering the following Watson services:</p>
<ul>
<li>Assistant (using the <code>tjbot-skill-sample.json</code> provided in the <a href="https://github.com/ibmtjbot/tjbot/tree/master/recipes/conversation">Conversation</a> recipe)</li>
<li>Language Translator</li>
<li>Tone Analyzer</li>
</ul>
<blockquote>
<p>ðŸ’¡ Remember to create an <code>ibm-credentials.env</code> file in the root <code>tjbotlib</code> directory for your Watson authentication credentials.</p>
</blockquote>
<h3>Hardware Tests</h3>
<p>As TJBot has a number of hardware components that may or may not be hooked up correctly, we provide an additional set of hardware tests that may be run individually (i.e. outside of the Jest framework). These tests are contained in the <code>__tests__</code> directory and may be run via <code>npm run-script</code> from the <code>tjbotlib</code> directory:</p>
<pre><code>npm run-script test-led
npm run-script test-mic
npm run-script test-servo
npm run-script test-speaker
</code></pre>
<blockquote>
<p>ðŸ’¡ The <code>test-mic</code> tests requires authentication credientials for the Tone Analyzer service defined in an <code>ibm-credentials.env</code> file in the root <code>tjbotlib</code> directory.</p>
</blockquote>
<h1>Contributing</h1>
<p>We encourage you to make enhancements to this library and contribute them back to us via a pull request.</p>
<h1>License</h1>
<p>This project uses the <a href="LICENSE">Apache License Version 2.0</a> software license.</p>
    </article>
  </section>


    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>